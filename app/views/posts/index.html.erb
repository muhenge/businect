<%= render partial: 'shared/nav' %>
 
<div class="container">

<div class="w-content">

    <div class="row">
        <div class="col s12 m12 l9 post-container">
             <%= form_for Post.new, :url => posts_path(), :method => :post do |f| %>
         <%= f.text_area :content, placeholder: "Post here" %>
         <div class="fileUpload">
                    
            <span class=""> <i class="small material-icons">add_a_photo</i></span>
            <%= f.file_field :image,direct_upload: true, accept:'application/jpeg,application/jpg,application/png,application/gif',class:"upload"%>
         </div>
         <%= f.label :field_of_interest, "Tag to" %>
         <%= f.collection_select(:interest_id, Interest.all, :id, :field_of_interest, :prompt => 'Tag to') %><br>
         <%= f.submit "Post",class:"btn post-btn" %>
      <% end %>
            <% @posts.each do |post| %>
                <div class="post">
                <%= link_to post_path(post), :action => 'go' do %>
                <%= image_tag(post.image, :class => "user-img responsive-img", alt: "user image") if post.image.attached?%><br>
                    <%= post.content %><br>
                <%end%>

                    <div class="row post-widgets">
                        <div class="col s6 l6 m6">
                            Posted by: <%= link_to post.user.username.capitalize, post_user_path(post, post.user) %><br>
                            <%= link_to like_post_path(post), method: :put do%>
                                <span class="medium material-icons">thumb_up</span>
                                <%= post.get_upvotes.size %>
                        <% end %>
                        </div>
                        <div class="col s6 l6 m6">
                        <%= post.created_at %>
                        </div>
                    </div>
                </div>
                
            <%end%>
        </div>
        <div class="col s12 m12 l3">
            <%= link_to current_user.interest.field_of_interest, user_interest_path(@user, @user.interest) %>
        </div>
    </div>
</div>

